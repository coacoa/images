@startuml
autonumber

actor User

participant "Hardware\n(BIOS/UEFI)" as HW
participant "Bootloader\n(GRUB/systemd-boot)" as BL
participant "Linux Kernel\n(NixOS Kernel)" as Kernel
participant "Init System\n(systemd)" as Init
participant "Login Manager\n(sddm, greetd など)" as LoginMgr
participant "Window System\n(X11 or Wayland)" as WinSys
participant "Window Manager\n(i3 or sway)" as WM
participant "User Apps\n(Terminal, Browser, etc)" as App

== Boot ==
User -> HW : Power on
HW -> BL : Load Bootloader
BL -> Kernel : Load NixOS Kernel + initrd
Kernel -> Init : Handoff to init=/nix/store/...

== System Init ==
Init -> LoginMgr : Launch Login Manager

== Login ==
User -> LoginMgr : Login with credentials

== Session Start ==
LoginMgr -> WinSys : Start X11 or Wayland
alt Using X11
    WinSys -> WM : Start i3
else Using Wayland
    WinSys -> WM : Start sway
end

== Desktop ==
WM -> App : Launch user apps (via .xsession or sway config)
User -> App : Use Terminal, Browser, etc

@enduml