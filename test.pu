@startuml
title flake.nix と home.nix の関係図

package "Nix Flake" {
  class flake.nix {
    +inputs.nixpkgs
    +inputs.home-manager
    +outputs
    +nixosConfigurations
  }

  class home.nix {
    +user-specific settings
  }

  class home-manager.lib.homeManagerConfiguration {
    +modules
    +pkgs
  }

  flake.nix --> "import" home.nix : import ./hosts/<host>/home.nix
  flake.nix --> home-manager.lib.homeManagerConfiguration : use in outputs
  home-manager.lib.homeManagerConfiguration --> home.nix : uses as module
}

@enduml