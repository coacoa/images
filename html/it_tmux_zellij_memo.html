<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Terminal Multiplexer Setup & Memo</title>
    <style>
        body { font-family: 'Helvetica Neue', Arial, sans-serif; line-height: 1.6; color: #333; max-width: 900px; margin: 30px auto; padding: 0 20px; background-color: #f9f9f9; }
        .container { background: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { border-bottom: 3px solid #333; padding-bottom: 10px; color: #1a1a1a; }
        h2 { border-left: 6px solid #4a90e2; padding-left: 15px; margin-top: 40px; color: #2c3e50; }
        h3 { color: #e67e22; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        table { border-collapse: collapse; width: 100%; margin: 20px 0; background: #fff; }
        th, td { border: 1px solid #dfe6e9; padding: 12px; text-align: left; }
        th { background-color: #f1f2f6; font-weight: bold; }
        code { background: #f0f0f0; padding: 2px 6px; border-radius: 4px; font-family: 'Courier New', Courier, monospace; font-weight: bold; color: #d63031; }
        .key { display: inline-block; background: #333; color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.9em; margin: 2px; }
        .nix-box { background: #2d3436; color: #dfe6e9; padding: 15px; border-radius: 6px; overflow-x: auto; }
        .note { background: #fff3cd; border-left: 5px solid #ffeeba; padding: 15px; margin: 20px 0; border-radius: 4px; }
    </style>
</head>
<body>

<div class="container">
    <h1>Terminal Multiplexer 同居メモ</h1>
    <p>NixOS環境において、Alacritty等の「タブなしターミナル」を拡張するための2大ツールのまとめ。</p>

    <div class="note">
        <strong>現在のステータス:</strong> <code>tmux</code> と <code>Zellij</code> を両方インストール済み。どちらも <span class="key">Ctrl</span> + <span class="key">a</span> を起点としたVim風操作に統一中。
    </div>

    <h2>1. 共通のVim風ショートカット一覧</h2>
    <p>両方の設定において、以下の操作感に統一しています。</p>
    <table>
        <thead>
            <tr>
                <th>アクション</th>
                <th>キー（Prefix後）</th>
                <th>備考</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>垂直分割 (右に)</strong></td>
                <td><span class="key">v</span></td>
                <td>Vertical split</td>
            </tr>
            <tr>
                <td><strong>水平分割 (下に)</strong></td>
                <td><span class="key">s</span></td>
                <td>Horizontal split</td>
            </tr>
            <tr>
                <td><strong>ペイン移動</strong></td>
                <td><span class="key">h</span> <span class="key">j</span> <span class="key">k</span> <span class="key">l</span></td>
                <td>Vimの移動キーと同じ</td>
            </tr>
            <tr>
                <td><strong>新しいタブ</strong></td>
                <td><span class="key">c</span></td>
                <td>Create new tab</td>
            </tr>
            <tr>
                <td><strong>次のタブ / 前のタブ</strong></td>
                <td><span class="key">n</span> / <span class="key">p</span></td>
                <td>Next / Previous</td>
            </tr>
        </tbody>
    </table>

    <h2>2. 各ツールの特徴と起動コマンド</h2>
    
    <h3>tmux (ティーマックス)</h3>
    <ul>
        <li><strong>起動:</strong> <code>tmux</code></li>
        <li><strong>特徴:</strong> 質実剛健。軽量。歴史が長く安定している。</li>
        <li><strong>Vim対応:</strong> コピーモードも <code>set-window-option -g mode-keys vi</code> でVim風に設定。</li>
    </ul>

    <h3>Zellij (ゼリッジ)</h3>
    <ul>
        <li><strong>起動:</strong> <code>zellij</code></li>
        <li><strong>特徴:</strong> 親切。画面下部に常にガイドが出る。Rust製でモダン。</li>
        <li><strong>注意点:</strong> 設定ファイル(KDL)の構文に注意。<code>GoToNextTab { }</code> のように引数を空の波括弧で渡す。</li>
    </ul>

    <h2>3. NixOS 設定のポイント</h2>
    <p>Home Managerでの同居設定例：</p>
    <div class="nix-box">
<pre>
# zellij.nix の重要箇所
keybinds = {
  "shared_except \"locked\" \"tmux\"" = {
    "bind \"Ctrl a\"" = { SwitchToMode = "Tmux"; };
  };
  tmux = {
    "bind \"n\"" = { GoToNextTab = { }; SwitchToMode = "Normal"; };
  };
}
</pre>
    </div>

    <h2>4. 今後の使い分けガイド</h2>
    <ul>
        <li><strong>Alacrittyで作業中:</strong> <code>zellij</code> を叩いて、画面下のガイドを見ながら快適にタブ管理。</li>
        <li><strong>SSHでサーバーに入った時:</strong> どこでも入っている <code>tmux</code> で作業。</li>
        <li><strong>見た目に飽きたら:</strong> <code>Zellij</code> のテーマ機能を <code>settings.theme = "tokyo-night";</code> などで切り替える。</li>
    </ul>

    <p style="text-align: right; margin-top: 50px; color: #95a5a6; font-size: 0.8em;">
        作成日: 2026年1月11日
    </p>
</div>

</body>
</html>
