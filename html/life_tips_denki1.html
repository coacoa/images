<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>é›»æµå›è·¯ã§å­¦ã¶é›»æ°—ä»£è¨ˆç®—</title>
  <style>
    body { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; background: #f6f7f9; padding: 20px; }
    .card { background: white; border-radius: 12px; padding: 20px; max-width: 600px; margin: auto; box-shadow: 0 8px 20px rgba(0,0,0,0.08); }
    h1 { font-size: 1.4rem; }
    label { display: block; margin-top: 12px; }
    input { width: 100%; padding: 8px; font-size: 1rem; margin-top: 4px; }
    button { margin-top: 16px; width: 100%; padding: 10px; font-size: 1rem; border-radius: 8px; border: none; cursor: pointer; background: #2563eb; color: white; }
    .result, .formula, .memo { margin-top: 16px; padding: 12px; background: #eef2ff; border-radius: 8px; display: none; }
    .toggle { background: #e5e7eb; color: #111; }
    .tip { font-size: 0.9rem; color: #333; margin-top: 8px; background: #f1f5f9; padding: 8px; border-radius: 6px; }
    svg { width: 100%; height: 120px; margin-top: 20px; }
    .wire { fill: none; stroke: #888; stroke-width: 4; }
    .current { fill: none; stroke: #f59e0b; stroke-width: 4; stroke-linecap: round; }
    .battery { fill: none; stroke: #ef4444; stroke-width: 4; }
    .plusminus { font-size: 14px; fill: #111; font-weight: bold; }
  </style>
</head>
<body>
  <div class="card">
    <h1>ğŸ”‹ å››è§’å›è·¯ã§å­¦ã¶é›»æ°—ä»£è¨ˆç®—</h1>

    <p class="tip">ğŸ’¡ å››è§’ã®å›è·¯ã§é›»æµãŒã©ã®ã‚ˆã†ã«æµã‚Œã‚‹ã‹ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§å­¦ã¹ã¾ã™ã€‚<br>â€»å®Ÿéš›ã«ã¯äº¤æµãªã®ã§æµã‚Œã¯æºã‚Œã¾ã™ã€‚</p>

    <label>æ¶ˆè²»é›»åŠ›ï¼ˆWï¼‰<input id="power" type="number" value="7" /></label>
    <label>é›»åœ§ï¼ˆVï¼‰<input id="volt" type="number" value="12" /></label>
    <label>é›»æµï¼ˆAã€è‡ªå‹•è¨ˆç®—ï¼‰<input id="amp" type="number" disabled /></label>
    <label>é›»æ°—æ–™é‡‘ï¼ˆå†† / kWhï¼‰<input id="price" type="number" value="27" /></label>
    <label>ç¨¼åƒæ—¥æ•°ï¼ˆæ—¥ï¼‰<input id="days" type="number" value="30" /></label>

    <button onclick="calculate()">è¨ˆç®—ã™ã‚‹</button>
    <button class="toggle" onclick="toggleFormula()">è¨ˆç®—å¼ã‚’è¡¨ç¤º / éè¡¨ç¤º</button>

    <div id="result" class="result"></div>
    <div id="formula" class="formula"></div>
    <div id="memo" class="memo"></div>

    <svg viewBox="0 0 500 120">
      <!-- ãƒãƒƒãƒ†ãƒªãƒ¼ -->
      <line x1="50" y1="40" x2="50" y2="60" class="battery" />
      <line x1="60" y1="40" x2="60" y2="60" class="battery" />
      <text x="45" y="35" class="plusminus">+</text>
      <text x="65" y="35" class="plusminus">-</text>
      <!-- å››è§’å›è·¯ -->
      <path class="wire" d="M60,50 h150 v40 h-150 z" />
      <!-- é›»æµï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ -->
      <circle class="current" r="6" cx="60" cy="50" />
    </svg>
  </div>

  <script>
    function calculate() {
      const power = Number(document.getElementById('power').value);
      const volt = Number(document.getElementById('volt').value);
      const price = Number(document.getElementById('price').value);
      const days = Number(document.getElementById('days').value);

      const amp = power / volt;
      document.getElementById('amp').value = amp.toFixed(3);

      const kwh = power * 24 * days / 1000;
      const cost = kwh * price;

      document.getElementById('result').style.display = 'block';
      document.getElementById('result').innerHTML = `
        <strong>ğŸ’¡ çµæœ</strong><br>
        æ¶ˆè²»é›»åŠ›ï¼š${power} W<br>
        é›»åœ§ï¼š${volt} V<br>
        é›»æµï¼šç´„ ${amp.toFixed(3)} A<br>
        æ¶ˆè²»é›»åŠ›é‡ï¼š${kwh.toFixed(2)} kWh<br>
        é›»æ°—ä»£ï¼š<strong>${cost.toFixed(0)} å††</strong>
      `;

      document.getElementById('formula').innerHTML = `
        <strong>ğŸ“ è¨ˆç®—ã®ä¸­èº«</strong><br>
        é›»æµ A = W Ã· V = ${power} Ã· ${volt} â‰ˆ ${amp.toFixed(3)} A<br>
        æ¶ˆè²»é›»åŠ›é‡ kWh = W Ã— 24æ™‚é–“ Ã— ${days}æ—¥ Ã· 1000 = ${kwh.toFixed(2)} kWh<br>
        é›»æ°—ä»£ = ${kwh.toFixed(2)} Ã— ${price}å†† = ${cost.toFixed(0)} å††
      `;

      document.getElementById('memo').style.display = 'block';
      document.getElementById('memo').innerHTML = `
        <strong>ğŸ“ ãƒ¡ãƒ¢</strong><br>
        ã“ã®å›³ã¯å››è§’ã„ç›´æµå›è·¯ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚<br>
        ç¾å®Ÿã®å®¶åº­ç”¨é›»æµã¯äº¤æµã®ãŸã‚ã€é›»æµã®æ–¹å‘ã¯æºã‚Œå‹•ãã¾ã™ã€‚<br>
        ã“ã“ã§ã¯ç›´æµã‚¤ãƒ¡ãƒ¼ã‚¸ã§æµã‚Œã‚’ç†è§£ã—ã‚„ã™ãã—ã¦ã„ã¾ã™ã€‚
      `;

      // SVGã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³: é›»æµãŒå››è§’å›è·¯ã‚’å›ã‚‹
      const circle = document.querySelector('.current');
      circle.style.transition = 'none';
      circle.setAttribute('cx', 60);
      circle.setAttribute('cy', 50);
      let posX = 60, posY = 50;
      let phase = 0;
      function move() {
        switch(phase) {
          case 0: posX += 4; if(posX>=210){posX=210; phase=1;} break;
          case 1: posY += 4; if(posY>=90){posY=90; phase=2;} break;
          case 2: posX -= 4; if(posX<=60){posX=60; phase=3;} break;
          case 3: posY -=4; if(posY<=50){posY=50; phase=0;} break;
        }
        circle.setAttribute('cx', posX);
        circle.setAttribute('cy', posY);
        requestAnimationFrame(move);
      }
      move();
    }

    function toggleFormula() {
      const f = document.getElementById('formula');
      f.style.display = f.style.display === 'none' || f.style.display === '' ? 'block' : 'none';
    }
  </script>
</body>
</html>

